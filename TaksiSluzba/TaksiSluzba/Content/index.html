<!DOCTYPE html>
<html>


<head>
    <link rel="stylesheet" type="text/css" href="Stilovi.css" />
    <link rel="stylesheet" href="https://openlayers.org/en/v4.1.0/css/ol.css" type="text/css">
    <script src="https://openlayers.org/en/v4.1.0/build/ol.js"></script>



    <meta charset="utf-8" />
    <title></title>


    <script src="/Scripts/jquery-1.10.2.js"></script>
    <script>
        $(document).ready(function () {

            // Svuda napravi ono za refresh

            var trenutnoUlogovan; // trenutno ulogovan treba svuda da se zameni sa session storage user
            var UserMenu;
            var UserView;

            var pomocVozaci = "";
            //
            var map = "<div id=\"map\" style=\"height:400px; text-align: center; width:50%\" class=\"map\"></div><script>";
            map += "var xx; var yy; var ulica_broj; var grad;";
            map += "function reverseGeocode(coords) {";
            map += "fetch('http://nominatim.openstreetmap.org/reverse?format=json&lon=' + coords[0] + '&lat=' + coords[1])";
            map += ".then(function(response) {return response.json();}).then(function(json) {var add = json.address;";
            map += "ulica_broj = add.road; if(add.house_number != null){ulica_broj += \" \"+add.house_number;}grad = add.city + \" \" + add.postcode; $(\"#kord\").html(ulica_broj +\" , \"+ grad);});}";
            map += "var map = new ol.Map({layers: [new ol.layer.Tile({";
            map += "source: new ol.source.OSM()})],target: 'map',view: new ol.View({";
            map += "center: [2209717.3810248757,5660306.884676355],zoom: 19})});";
            map += "map.on('dblclick', function (evt) {var coord = ol.proj.toLonLat(evt.coordinate); reverseGeocode(coord);";
            map += " xx = coord[0]; yy = coord[1];});";
            map += "<\/script>";
            //

            if (sessionStorage.getItem("trenutniPrikaz") != null) {
                $("#PageContent").html(sessionStorage.getItem("trenutniPrikaz"));
            }

            if (sessionStorage.getItem("trenutniMeni") != null) {
                $("#PageMenu").html(sessionStorage.getItem("trenutniMeni"));
            }

            if (sessionStorage.getItem("ulogovaniKorisnik") != null) {
                trenutnoUlogovan = JSON.parse(sessionStorage.getItem("ulogovaniKorisnik"));
            }

            $(document).on("dblclick", "#map", function () {
                if (xx != null && yy != null) {
                    var coords = {
                        x: xx,
                        y: yy
                    };
                    $.get("/api/ahome/najblizi", coords, function (data, status) {
                        var nesto = eval(data);
                        var pom = "";
                        for (var k in nesto) {
                            pom += "<option value=\"" + k + "\">" + nesto[k] + "</option>";
                        }
                        pomocVozaci = pom;
                        $("#vozaci").html(pom);
                    });
                }


            });

            $(document).on("click", "#logovanje", function () {

                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = "<table>";
                UserView += "    <tr>";
                UserView += "        <td> Korisničko ime </td>";
                UserView += "        <td> <input type=\"text\" id=\"Username\" /> </td>";
                UserView += "    </tr>";
                UserView += "    <tr>";
                UserView += "        <td> Lozinka </td>";
                UserView += "        <td> <input type=\"password\" id=\"Password\" /> </td>";
                UserView += "    </tr>";
                UserView += "    <tr>";
                UserView += "        <td> <input type=\"button\" value=\"Uloguj se\" id=\"logovanjeButton\" /></td>";
                UserView += "    </tr>";
                UserView += "</table>";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                $("#PageContent").html(UserView);
            });

            $(document).on("click", "#logovanjeButton", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                if ($("#Username").val() != "" && $("#Password").val() != "") {
                    var objekat = { Username: $("#Username").val(), Password: $("#Password").val() };
                    $.get("/api/ahome/login", objekat, function (data, status) {
                        if (data.UserName == null) {
                            $("#Greske").html(data);
                        } else {
                            trenutnoUlogovan = data;
                            sessionStorage.setItem("ulogovaniKorisnik", JSON.stringify(trenutnoUlogovan)); //  sessionStorage.removeItem("ulogovaniKorisnik");
                            //sessionStorage.getItem("ulogovaniKorisnik");

                            if (data.Uloga == 0) {
                                // KORISNIK
                                UserView = " <br/> ";
                                UserView += "    <table border=\"1\">";
                                UserView += "        <tr> <th> Start </th> <th> Odredište </th> <th> Mušterija </th> <th> Vozač </th> <th> Dispečer </th> <th> Status vožnje </th> <th> </th> <th> </th> </tr>";

                                for (v in data.Voznje) {
                                    UserView += "   <tr> <td> " + data.Voznje[v] + " </td> <td>" + data.Voznje[v].Odrediste + " </td> <td>" + data.Voznje[v].Musterija.Name + " " + data.Voznje[v].Musterija.LastName + "  </td > <td> " + data.Voznje[v].Name + " " + data.Voznje[v].Vozac.LastName + "</td> <td>" + data.Voznje[v].Dispatcher.Name + " " + data.Voznje[v].Dispatcher.LastName + "</td> <td>" + data.Voznje[v].StatusVoznje + " </td> <td> <input type=\"submit\" value=\"Izmeni\" id=\"izmenivoznju\" /> </td> <td> <input type=\"submit\" value=\"Pregledaj\" id=\"pregledajvoznju\" /> </td>  </tr > ";
                                }
                                UserView += "    </table>";
                                UserView += " <p> Pretraga po statusu </p>";
                                UserView += "<select name=\"vrsteVoznji\" size=\"1\">";
                                UserView += "   <option value=\"1\">KREIRANA</option>";
                                UserView += "    <option value=\"2\">FORMIRANA</option>";
                                UserView += "    <option value=\"3\">OBRADJENA</option>";
                                UserView += "    <option value=\"4\">PRIHVACENA</option>";
                                UserView += "    <option value=\"5\">OTKAZANA</option>";
                                UserView += "    <option value=\"6\">NEUSPESNA</option>";
                                UserView += "    <option value=\"8\">USPESNA</option>";
                                UserView += "    <option value=\"8\">U_TOKU</option>";
                                UserView += "</select> <br/> <br/>";

                                UserView += " <input value=\"Sortiranje po Datumu\" id=\"dateSort\" type=\"submit\" /> <br />";
                                UserView += "    <input value=\"Sortiranje po Oceni   \" id=\"gradeSort\" type=\"submit\" /> <br />";

                                UserView += "    <br/> Pretražite po datumu <br/> ";

                                UserView += "Početni datum: <input id=\"startdateSort\" type=\"datetime - local\" /> <br />";
                                UserView += "Krajnji datum: &nbsp;<input id=\"enddateSort\" type=\"datetime - local\" /> <br />";
                                UserView += "    <input type=\"submit\" id=\"searchByDate\" value=\"Pretraži\" /> <br/>";

                                UserView += "     <br/>Pretražite po oceni <br/> ";
                                UserView += "     Minimalna ocena: &nbsp;&nbsp;&nbsp;&nbsp;  ";

                                UserView += "   <select name=\"OceneMin\" size=\"1\">";
                                UserView += "        <option value=\"0\">0</option>";
                                UserView += "        <option value=\"1\">1</option>";
                                UserView += "        <option value=\"2\">2</option>";
                                UserView += "        <option value=\"3\">3</option>";
                                UserView += "        <option value=\"4\">4</option>";
                                UserView += "        <option value=\"5\">5</option>";
                                UserView += "    </select> <br/>";

                                UserView += "     Maksimalna ocena: &nbsp;&nbsp;   ";

                                UserView += "    <select name=\"OceneMax\" size=\"1\">";
                                UserView += "        <option value=\"0\">0</option>";
                                UserView += "         <option value=\"1\">1</option>";
                                UserView += "        <option value=\"2\">2</option>";
                                UserView += "        <option value=\"3\">3</option>";
                                UserView += "        <option value=\"4\">4</option>";
                                UserView += "        <option value=\"5\">5</option>";
                                UserView += "    </select> <br/>";

                                UserView += "     <input type=\"submit\" id=\"searchByGrade\" value=\"Pretraži\" />";

                                UserView += "   <p> <br/>Pretraga po ceni </p>";
                                UserView += "    Minimalna cena: &nbsp;&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";
                                UserView += "    Maksimalna cena:&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";

                                UserView += "    <input type=\"submit\" id=\"searchByPrice\" value=\"Pretraži\" />";

                                UserMenu = "<table align=\"center\">";
                                UserMenu += "  <tr> ";
                                UserMenu += "        <td id=\"opcije\"> Opcije </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"profil\"> Pregled profila </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"novaVoznja\"> Nova vožnja </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"logout\"> Izloguj se </td>";
                                UserMenu += "    </tr>";
                                UserMenu += "</table>";


                                sessionStorage.setItem("trenutniPrikaz", UserView);
                                sessionStorage.setItem("trenutniMeni", UserMenu);

                                $("#PageContent").html(UserView);
                                $("#PageMenu").html(UserMenu);

                            }
                            else if (data.Uloga == 1) {
                                //  DRIVER

                                UserMenu = "<table align=\"center\">";
                                UserMenu += "  <tr> ";
                                UserMenu += "        <td id=\"opcijeVozaca\"> Opcije </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"profilVozaca\"> Pregled profila </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"logout\"> Izloguj se </td>";
                                UserMenu += "    </tr>";
                                UserMenu += "</table>";
                                //
                                UserView = "<h2> Vožnje </h2> ";
                                UserView += "    <table border=\"1\">";
                                UserView += "        <tr> <th> Start </th> <th> Odredište </th> <th> Mušterija </th> <th> Vozač </th> <th> Dispečer </th> <th> Status vožnje </th> <th> </th> <th> </th> </tr>";

                                for (v in data.Voznje) {
                                    UserView += "   <tr> <td> " + data.Voznje[v] + " </td> <td>" + data.Voznje[v].Odrediste + " </td> <td>" + data.Voznje[v].Musterija.Name + " " + data.Voznje[v].Musterija.LastName + "  </td > <td> " + data.Voznje[v].Name + " " + data.Voznje[v].Vozac.LastName + "</td> <td>" + data.Voznje[v].Dispatcher.Name + " " + data.Voznje[v].Dispatcher.LastName + "</td> <td>" + data.Voznje[v].StatusVoznje + " </td> <td> <input type=\"submit\" value=\"Izmeni\" id=\"izmenivoznju\" /> </td> <td> <input type=\"submit\" value=\"Pregledaj\" id=\"pregledajvoznju\" /> </td>  </tr > ";
                                }
                                UserView += "    </table>";
                                UserView += "    <input type=\"submit\" value=\"Voznje na čekanju\" id=\"voznjeNaCekanju\"/>";
                                UserView += " <p> Pretraga po statusu </p>";
                                UserView += "<select name=\"vrsteVoznji\" size=\"1\">";
                                UserView += "   <option value=\"1\">KREIRANA</option>";
                                UserView += "    <option value=\"2\">FORMIRANA</option>";
                                UserView += "    <option value=\"3\">OBRADJENA</option>";
                                UserView += "    <option value=\"4\">PRIHVACENA</option>";
                                UserView += "    <option value=\"5\">OTKAZANA</option>";
                                UserView += "    <option value=\"6\">NEUSPESNA</option>";
                                UserView += "    <option value=\"8\">USPESNA</option>";
                                UserView += "    <option value=\"8\">U_TOKU</option>";
                                UserView += "</select> <br/> <br/>";

                                UserView += " <input value=\"Sortiranje po Datumu\" id=\"dateSort\" type=\"submit\" /> <br />";
                                UserView += "    <input value=\"Sortiranje po Oceni   \" id=\"gradeSort\" type=\"submit\" /> <br />";

                                UserView += "    <br/> Pretražite po datumu <br/> ";

                                UserView += "Početni datum: <input id=\"startdateSort\" type=\"datetime - local\" /> <br />";
                                UserView += "Krajnji datum: &nbsp;<input id=\"enddateSort\" type=\"datetime - local\" /> <br />";
                                UserView += "    <input type=\"submit\" id=\"searchByDate\" value=\"Pretraži\" /> <br/>";

                                UserView += "     <br/>Pretražite po oceni <br/> ";
                                UserView += "     Minimalna ocena: &nbsp;&nbsp;&nbsp;&nbsp;  ";

                                UserView += "   <select name=\"OceneMin\" size=\"1\">";
                                UserView += "        <option value=\"0\">0</option>";
                                UserView += "        <option value=\"1\">1</option>";
                                UserView += "        <option value=\"2\">2</option>";
                                UserView += "        <option value=\"3\">3</option>";
                                UserView += "        <option value=\"4\">4</option>";
                                UserView += "        <option value=\"5\">5</option>";
                                UserView += "    </select> <br/>";

                                UserView += "     Maksimalna ocena: &nbsp;&nbsp;   ";

                                UserView += "    <select name=\"OceneMax\" size=\"1\">";
                                UserView += "        <option value=\"0\">0</option>";
                                UserView += "         <option value=\"1\">1</option>";
                                UserView += "        <option value=\"2\">2</option>";
                                UserView += "        <option value=\"3\">3</option>";
                                UserView += "        <option value=\"4\">4</option>";
                                UserView += "        <option value=\"5\">5</option>";
                                UserView += "    </select> <br/>";

                                UserView += "     <input type=\"submit\" id=\"searchByGrade\" value=\"Pretraži\" />";

                                UserView += "   <p> <br/>Pretraga po ceni </p>";
                                UserView += "    Minimalna cena: &nbsp;&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";
                                UserView += "    Maksimalna cena:&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";

                                UserView += "    <input type=\"submit\" id=\"searchByPrice\" value=\"Pretraži\" />";

                                UserView += "    <input type=\"submit\" value=\"Sortiraj po udaljenosti\" id=\"sortirajPoUdaljenosti\"/>";  // sortira tabelu po

                                sessionStorage.setItem("trenutniPrikaz", UserView);
                                sessionStorage.setItem("trenutniMeni", UserMenu);

                                $("#PageContent").html(UserView);
                                $("#PageMenu").html(UserMenu);
                                //
                            }
                            else if (data.Uloga == 2) {
                                // ADMIN
                                UserView = " <br/> ";
                                UserView += "<input type=\"submit\" value=\"Prikazi sve voznje\" id=\"prikazSvihVoznji\"/>";
                                UserView += "    <table border=\"1\">";
                                UserView += "        <tr> <th> Start </th> <th> Odredište </th> <th> Mušterija </th> <th> Vozač </th> <th> Dispečer </th> <th> Status vožnje </th> <th> </th> <th> </th> </tr>";

                                for (v in data.Voznje) {
                                    UserView += "   <tr> <td> " + data.Voznje[v] + " </td> <td>" + data.Voznje[v].Odrediste + " </td> <td>" + data.Voznje[v].Musterija.Name + " " + data.Voznje[v].Musterija.LastName + "  </td > <td> " + data.Voznje[v].Name + " " + data.Voznje[v].Vozac.LastName + "</td> <td>" + data.Voznje[v].Dispatcher.Name + " " + data.Voznje[v].Dispatcher.LastName + "</td> <td>" + data.Voznje[v].StatusVoznje + " </td> <td> <input type=\"submit\" value=\"Izmeni\" id=\"izmenivoznju\" /> </td> <td> <input type=\"submit\" value=\"Pregledaj\" id=\"pregledajvoznju\" /> </td>  </tr > ";
                                }
                                UserView += "    </table>";
                                UserView += " <p> Pretraga po statusu </p>";
                                UserView += "<select name=\"vrsteVoznji\" size=\"1\">";
                                UserView += "   <option value=\"1\">KREIRANA</option>";
                                UserView += "    <option value=\"2\">FORMIRANA</option>";
                                UserView += "    <option value=\"3\">OBRADJENA</option>";
                                UserView += "    <option value=\"4\">PRIHVACENA</option>";
                                UserView += "    <option value=\"5\">OTKAZANA</option>";
                                UserView += "    <option value=\"6\">NEUSPESNA</option>";
                                UserView += "    <option value=\"8\">USPESNA</option>";
                                UserView += "    <option value=\"8\">U_TOKU</option>";
                                UserView += "</select> <br/> <br/>";

                                UserView += " <input value=\"Sortiranje po Datumu\" id=\"dateSort\" type=\"submit\" /> <br />";
                                UserView += "    <input value=\"Sortiranje po Oceni   \" id=\"gradeSort\" type=\"submit\" /> <br />";

                                UserView += "    <br/> Pretražite po datumu <br/> ";

                                UserView += "Početni datum: <input id=\"startdateSort\" type=\"datetime - local\" /> <br />";
                                UserView += "Krajnji datum: &nbsp;<input id=\"enddateSort\" type=\"datetime - local\" /> <br />";
                                //UserView += "    <input type=\"submit\" id=\"searchByDate\" value=\"Pretraži\" /> <br/>";

                                UserView += "     <br/>Pretražite po oceni <br/> ";
                                UserView += "     Minimalna ocena: &nbsp;&nbsp;&nbsp;&nbsp;  ";

                                UserView += "   <select name=\"OceneMin\" size=\"1\">";
                                UserView += "        <option value=\"0\">0</option>";
                                UserView += "        <option value=\"1\">1</option>";
                                UserView += "        <option value=\"2\">2</option>";
                                UserView += "        <option value=\"3\">3</option>";
                                UserView += "        <option value=\"4\">4</option>";
                                UserView += "        <option value=\"5\">5</option>";
                                UserView += "    </select> <br/>";

                                UserView += "     Maksimalna ocena: &nbsp;&nbsp;   ";

                                UserView += "    <select name=\"OceneMax\" size=\"1\">";
                                UserView += "        <option value=\"0\">0</option>";
                                UserView += "         <option value=\"1\">1</option>";
                                UserView += "        <option value=\"2\">2</option>";
                                UserView += "        <option value=\"3\">3</option>";
                                UserView += "        <option value=\"4\">4</option>";
                                UserView += "        <option value=\"5\">5</option>";
                                UserView += "    </select> <br/>";

                                //UserView += "     <input type=\"submit\" id=\"searchByGrade\" value=\"Pretraži\" />";

                                UserView += "   <p> <br/>Pretraga po ceni </p>";
                                UserView += "    Minimalna cena: &nbsp;&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";
                                UserView += "    Maksimalna cena:&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";

                                //UserView += "    <input type=\"submit\" id=\"searchByPrice\" value=\"Pretraži\" />";

                                UserView += "<p> <br/>Pretraga po imenu i/ili prezimenu korisnika </p>";
                                UserView += " <br/>Ime korisnika: <br/>";
                                UserView += "<input type=\"text\" id=\"imeZaPretragu\" />";

                                UserView += " <br/>Prezime korisnika: <br/>";
                                UserView += "<input type=\"text\" id=\"prezimeZaPretragu\" />";
                                //UserView += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type=\"submit\" id=\"pretrazikorisnike\" value=\"Pretraži korisnike\" />";

                                UserView += "<p> <br/>Pretraga po imenu i/ili prezimenu vozača </p>";
                                UserView += " <br/>Ime vozača: <br/>";
                                UserView += "<input type=\"text\" id=\"vimeZaPretragu\" />";

                                UserView += " <br/>Prezime vozača: <br/>";
                                UserView += "<input type=\"text\" id=\"vprezimeZaPretragu\" />";
                                UserView += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type=\"submit\" id=\"izvrsipretragu\" value=\"Pretraži\" />";

                                UserMenu = "<table align=\"center\">";
                                UserMenu += "  <tr> ";
                                UserMenu += "        <td id=\"opcijeAdmina\"> Opcije </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"profilAdmina\"> Pregled profila </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"novaVoznja\"> Nova vožnja </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"noviVozac\"> Novi vozač </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"blok\"> Blokiraj Korisnika </td>";
                                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                                UserMenu += "        <td id=\"logout\"> Izloguj se </td>";
                                UserMenu += "    </tr>";
                                UserMenu += "</table>";

                                sessionStorage.setItem("trenutniPrikaz", UserView);
                                sessionStorage.setItem("trenutniMeni", UserMenu);

                                $("#PageContent").html(UserView);
                                $("#PageMenu").html(UserMenu);
                            }
                        }
                    });

                } else {
                    $("#Greske").html("Pogrešan unos lozinke ili korisničkog imena");
                }

            });

            $(document).on("click", "#opcijeVozaca", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                UserMenu = "<table align=\"center\">";
                UserMenu += "  <tr> ";
                UserMenu += "        <td id=\"opcijeVozaca\"> Opcije </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"profilVozaca\"> Pregled profila </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"logout\"> Izloguj se </td>";
                UserMenu += "    </tr>";
                UserMenu += "</table>";
                //
                UserView = "<h2> Vožnje </h2> ";
                UserView += "    <table border=\"1\">";
                UserView += "        <tr> <th> Start </th> <th> Odredište </th> <th> Mušterija </th> <th> Vozač </th> <th> Dispečer </th> <th> Status vožnje </th> <th> </th> <th> </th> </tr>";

                // if (data.Voznje != null) {
                for (v in trenutnoUlogovan.Voznje) {
                    UserView += "   <tr> <td> " + trenutnoUlogovan.Voznje[v] + " </td> <td>" + trenutnoUlogovan.Voznje[v].Odrediste + " </td> <td>" + trenutnoUlogovan.Voznje[v].Musterija.Name + " " + trenutnoUlogovan.Voznje[v].Musterija.LastName + "  </td > <td> " + trenutnoUlogovan.Voznje[v].Name + " " + trenutnoUlogovan.Voznje[v].Vozac.LastName + "</td> <td>" + trenutnoUlogovan.Voznje[v].Dispatcher.Name + " " + trenutnoUlogovan.Voznje[v].Dispatcher.LastName + "</td> <td>" + trenutnoUlogovan.Voznje[v].StatusVoznje + " </td> <td> <input type=\"submit\" value=\"Izmeni\" id=\"izmenivoznju\" /> </td> <td> <input type=\"submit\" value=\"Pregledaj\" id=\"pregledajvoznju\" /> </td>  </tr > ";
                }

                UserView += "    </table>";
                UserView += "    <input type=\"submit\" value=\"Voznje na čekanju\" id=\"voznjeNaCekanju\"/>";
                UserView += " <p> Pretraga po statusu </p>";
                UserView += "<select name=\"vrsteVoznji\" size=\"1\">";
                UserView += "   <option value=\"1\">KREIRANA</option>";
                UserView += "    <option value=\"2\">FORMIRANA</option>";
                UserView += "    <option value=\"3\">OBRADJENA</option>";
                UserView += "    <option value=\"4\">PRIHVACENA</option>";
                UserView += "    <option value=\"5\">OTKAZANA</option>";
                UserView += "    <option value=\"6\">NEUSPESNA</option>";
                UserView += "    <option value=\"8\">USPESNA</option>";
                UserView += "    <option value=\"8\">U_TOKU</option>";
                UserView += "</select> <br/> <br/>";

                UserView += " <input value=\"Sortiranje po Datumu\" id=\"dateSort\" type=\"submit\" /> <br />";
                UserView += "    <input value=\"Sortiranje po Oceni   \" id=\"gradeSort\" type=\"submit\" /> <br />";

                UserView += "    <br/> Pretražite po datumu <br/> ";

                UserView += "Početni datum: <input id=\"startdateSort\" type=\"datetime - local\" /> <br />";
                UserView += "Krajnji datum: &nbsp;<input id=\"enddateSort\" type=\"datetime - local\" /> <br />";
                UserView += "    <input type=\"submit\" id=\"searchByDate\" value=\"Pretraži\" /> <br/>";

                UserView += "     <br/>Pretražite po oceni <br/> ";
                UserView += "     Minimalna ocena: &nbsp;&nbsp;&nbsp;&nbsp;  ";

                UserView += "   <select name=\"OceneMin\" size=\"1\">";
                UserView += "        <option value=\"0\">0</option>";
                UserView += "        <option value=\"1\">1</option>";
                UserView += "        <option value=\"2\">2</option>";
                UserView += "        <option value=\"3\">3</option>";
                UserView += "        <option value=\"4\">4</option>";
                UserView += "        <option value=\"5\">5</option>";
                UserView += "    </select> <br/>";

                UserView += "     Maksimalna ocena: &nbsp;&nbsp;   ";

                UserView += "    <select name=\"OceneMax\" size=\"1\">";
                UserView += "        <option value=\"0\">0</option>";
                UserView += "         <option value=\"1\">1</option>";
                UserView += "        <option value=\"2\">2</option>";
                UserView += "        <option value=\"3\">3</option>";
                UserView += "        <option value=\"4\">4</option>";
                UserView += "        <option value=\"5\">5</option>";
                UserView += "    </select> <br/>";

                UserView += "     <input type=\"submit\" id=\"searchByGrade\" value=\"Pretraži\" />";

                UserView += "   <p> <br/>Pretraga po ceni </p>";
                UserView += "    Minimalna cena: &nbsp;&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";
                UserView += "    Maksimalna cena:&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";

                UserView += "    <input type=\"submit\" id=\"searchByPrice\" value=\"Pretraži\" />";

                UserView += "    <input type=\"submit\" value=\"Sortiraj po udaljenosti\" id=\"sortirajPoUdaljenosti\"/>";  // sortira tabelu po

                sessionStorage.setItem("trenutniPrikaz", UserView);
                sessionStorage.setItem("trenutniMeni", UserMenu);

                $("#PageContent").html(UserView);
                $("#PageMenu").html(UserMenu);
            });

            $(document).on("click", "#registracija", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = "    <table>";
                UserView += "    <tr> <td> Korisničko ime: </td> <td> <input type=\"text\" id=\"korisnickoIme\" /></td> </tr > ";
                UserView += "        <tr> <td> Lozinka: </td> <td> <input type=\"password\" id=\"korisnickaLozinka\" /> </td> </tr>";
                UserView += "        <tr> <td> Ime: </td> <td> <input type=\"text\" id=\"Ime\" /></td> </tr>";
                UserView += "        <tr> <td> Prezime: </td> <td> <input type=\"text\" id=\"Prezime\" /> </td> </tr>";
                UserView += "        <tr> <td> Pol: </td> <td>";
                UserView += "            <select name=\"Pol\" id=\"pol\" size=\"1\">";
                UserView += "               <option value=\"1\">Žensko</option>";
                UserView += "               <option value=\"2\" selected>Muško</option>";
                UserView += "            </select>";
                UserView += "       </td> </tr>";
                UserView += "        <tr> <td> JMBG: </td> <td> <input type=\"text\" id=\"korisnickiJMBG\" /> </td> </tr>";
                UserView += "        <tr> <td> Kontakt telefon: </td> <td> <input type=\"text\" id=\"korisnickiTelefon\" /> </td> </tr>";
                UserView += "        <tr> <td> Email: </td> <td> <input type=\"text\" id=\"korisnickiEmail\" /> </td> </tr>";
                UserView += "<tr><td colspan='2' align='center'> <input type=\"submit\" value='Potvrda Registracije' id=\"potvrdaRegistracije\"/></td></tr>";
                UserView += " </table >";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                $("#PageContent").html(UserView);
            });

            $(document).on("click", "#potvrdaRegistracije", function () {
                $("#Greske").empty();
                $("#AllGood").empty();
                // postaje musterija
                if ($("#korisnickoIme").val() != "" && $("#korisnickaLozinka").val() != ""
                    && $("#Ime").val() != "" && $("#Prezime").val() != "" && $("#korisnickiJMBG").val() != "" && $("#korisnickiTelefon").val() != "" && $("#korisnickiEmail").val() != "") {
                    var objekat = {
                        UserName: $("#korisnickoIme").val(), Password: $("#korisnickaLozinka").val(), Name: $("#Ime").val(), LastName: $("#Prezime").val(),
                        Gender: $("#pol").val(), JMBG: $("#korisnickiJMBG").val(), PhoneNumber: $("#korisnickiTelefon").val(), Email: $("#korisnickiEmail").val()
                    };

                    $.post("/api/ahome/registration", objekat, function (data, status) {
                        if (data.UserName == null) {
                            $("#Greske").html(data);
                        }
                        else {
                            UserView = " <table> ";
                            UserView += "   <tr>";
                            UserView += "       <td> Korisničko ime </td>";
                            UserView += "       <td> <input type=\"text\" id=\"Username\" /> </td>";
                            UserView += "    </tr>";
                            UserView += "    <tr>";
                            UserView += "        <td> Lozinka </td>";
                            UserView += "        <td> <input type=\"password\" id=\"Password\" /> </td>";
                            UserView += "    </tr>";
                            UserView += "    <tr>";
                            UserView += "        <td> <input type=\"button\" value=\"Uloguj se\" id=\"logovanjeButton\" /></td>";
                            UserView += "    </tr>";

                            UserView += "</table>";

                            sessionStorage.setItem("trenutniPrikaz", UserView);
                            $("#PageContent").html(UserView);
                        }

                    });

                } else {
                    $("#Greske").html("Sva polja moraju biti popunjena!");
                }
            });

            $(document).on("click", "#opcije", function () {
                $("#Greske").empty();
                $("#AllGood").empty();
                if (trenutnoUlogovan.Uloga == 0) {
                    // KORISNIK
                    UserView = " <br/> ";
                    UserView += "    <table border=\"1\">";
                    UserView += "        <tr> <th> Start </th> <th> Odredište </th> <th> Mušterija </th> <th> Vozač </th> <th> Dispečer </th> <th> Status vožnje </th> <th> </th> <th> </th> </tr>";

                    for (v in trenutnoUlogovan.Voznje) {
                        UserView += "   <tr> <td> " + trenutnoUlogovan.Voznje[v] + " </td> <td>" + trenutnoUlogovan.Voznje[v].Odrediste + " </td> <td>" + trenutnoUlogovan.Voznje[v].Musterija.Name + " " + trenutnoUlogovan.Voznje[v].Musterija.LastName + "  </td > <td> " + trenutnoUlogovan.Voznje[v].Name + " " + trenutnoUlogovan.Voznje[v].Vozac.LastName + "</td> <td>" + trenutnoUlogovan.Voznje[v].Dispatcher.Name + " " + trenutnoUlogovan.Voznje[v].Dispatcher.LastName + "</td> <td>" + trenutnoUlogovan.Voznje[v].StatusVoznje + " </td> <td> <input type=\"submit\" value=\"Izmeni\" id=\"izmenivoznju\" /> </td> <td> <input type=\"submit\" value=\"Pregledaj\" id=\"pregledajvoznju\" /> </td>  </tr > ";
                    }
                    UserView += "    </table>";
                    //UserView += "    <input type=\"submit\" value=\"Voznje na čekanju\" id=\"voznjeNaCekanju\"/>"; ovo vidi vozaccc
                    UserView += " <p> Pretraga po statusu </p>";
                    UserView += "<select name=\"vrsteVoznji\" size=\"1\">";
                    UserView += "   <option value=\"1\">KREIRANA</option>";
                    UserView += "    <option value=\"2\">FORMIRANA</option>";
                    UserView += "    <option value=\"3\">OBRADJENA</option>";
                    UserView += "    <option value=\"4\">PRIHVACENA</option>";
                    UserView += "    <option value=\"5\">OTKAZANA</option>";
                    UserView += "    <option value=\"6\">NEUSPESNA</option>";
                    UserView += "    <option value=\"8\">USPESNA</option>";
                    UserView += "    <option value=\"8\">U_TOKU</option>";
                    UserView += "</select> <br/> <br/>";

                    UserView += " <input value=\"Sortiranje po Datumu\" id=\"dateSort\" type=\"submit\" /> <br />";
                    UserView += "    <input value=\"Sortiranje po Oceni   \" id=\"gradeSort\" type=\"submit\" /> <br />";

                    UserView += "    <br/> Pretražite po datumu <br/> ";

                    UserView += "Početni datum: <input id=\"startdateSort\" type=\"datetime-local\" /> <br />";
                    UserView += "Krajnji datum: &nbsp;<input id=\"enddateSort\" type=\"datetime-local\" /> <br />";
                    UserView += "    <input type=\"submit\" id=\"searchByDate\" value=\"Pretraži\" /> <br/>";

                    UserView += "     <br/>Pretražite po oceni <br/> ";
                    UserView += "     Minimalna ocena: &nbsp;&nbsp;&nbsp;&nbsp;  ";

                    UserView += "   <select name=\"OceneMin\" size=\"1\">";
                    UserView += "        <option value=\"0\">0</option>";
                    UserView += "        <option value=\"1\">1</option>";
                    UserView += "        <option value=\"2\">2</option>";
                    UserView += "        <option value=\"3\">3</option>";
                    UserView += "        <option value=\"4\">4</option>";
                    UserView += "        <option value=\"5\">5</option>";
                    UserView += "    </select> <br/>";

                    UserView += "     Maksimalna ocena: &nbsp;&nbsp;   ";

                    UserView += "    <select name=\"OceneMax\" size=\"1\">";
                    UserView += "        <option value=\"0\">0</option>";
                    UserView += "         <option value=\"1\">1</option>";
                    UserView += "        <option value=\"2\">2</option>";
                    UserView += "        <option value=\"3\">3</option>";
                    UserView += "        <option value=\"4\">4</option>";
                    UserView += "        <option value=\"5\">5</option>";
                    UserView += "    </select> <br/>";

                    UserView += "     <input type=\"submit\" id=\"searchByGrade\" value=\"Pretraži\" />";

                    UserView += "   <p> <br/>Pretraga po ceni </p>";
                    UserView += "    Minimalna cena: &nbsp;&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";
                    UserView += "    Maksimalna cena:&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";

                    UserView += "    <input type=\"submit\" id=\"searchByPrice\" value=\"Pretraži\" />";

                    var UserMenu = "<table align=\"center\">";
                    UserMenu += "  <tr> ";
                    UserMenu += "        <td id=\"opcije\"> Opcije </td>";
                    UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                    UserMenu += "        <td id=\"profil\"> Pregled profila </td>";
                    UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                    UserMenu += "        <td id=\"profil\"> Nova vožnja </td>";
                    UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                    UserMenu += "        <td id=\"logout\"> Izloguj se </td>";
                    UserMenu += "    </tr>";
                    UserMenu += "</table>";

                    sessionStorage.setItem("trenutniPrikaz", UserView);
                    sessionStorage.setItem("trenutniMeni", UserMenu);

                    $("#PageContent").html(UserView);
                    $("#PageMenu").html(UserMenu);

                }
                else if (data.Uloga == 1) {
                    //  DRIVER

                }
                else if (data.Uloga == 2) {
                    // ADMIN
                }
            });

            $(document).on("click", "#profil", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = " <table>";
                UserView += " <tr> <td> Korisničko ime: </td> <td> <input type=\"text\" id=\"korisnickoIme\" value=" + trenutnoUlogovan.UserName + " /></td> </tr>";
                UserView += "   <tr> <td> Lozinka: </td> <td> <input type=\"password\" id=\"korisnickaLozinka\" value=" + trenutnoUlogovan.Password + " /> </td> </tr>";
                UserView += "    <tr> <td> Ime: </td> <td> <input type=\"text\" id=\"Ime\" value=" + trenutnoUlogovan.Name + " /></td> </tr>";
                UserView += "   <tr> <td> Prezime: </td> <td> <input type=\"text\" id=\"Prezime\" value=" + trenutnoUlogovan.LastName + " /> </td> </tr>";
                if (trenutnoUlogovan.Gender == 1) {
                    UserView += "   <tr> <td> Pol: </td> <td>";
                    UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                    UserView += "            <option value=\"1\">Žensko</option>";
                    UserView += "            <option value=\"0\">Muško</option>";
                    UserView += "        </select>";
                } else {
                    UserView += "   <tr> <td> Pol: </td> <td>";
                    UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                    UserView += "            <option value=\"0\">Muško</option>";
                    UserView += "            <option value=\"1\">Žensko</option>";
                    UserView += "        </select>";
                }
                /*UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                UserView += "            <option value=\"1\">Žensko</option>";
                UserView += "            <option value=\"2\">Muško</option>";
                UserView += "        </select>";*/
                UserView += "    </td> </tr>";
                UserView += "    <tr> <td> JMBG: </td> <td> <input type=\"text\" id=\"korisnickiJMBG\" value=" + trenutnoUlogovan.JMBG + " /> </td> </tr>";
                UserView += "    <tr> <td> Kontakt telefon: </td> <td> <input type=\"text\" id=\"korisnickiTelefon\" value=" + trenutnoUlogovan.PhoneNumber + " /> </td> </tr>";
                UserView += "    <tr> <td> Email: </td> <td> <input type=\"text\" id=\"korisnickiEmail\" value=" + trenutnoUlogovan.Email + " /> </td> </tr>";
                UserView += "   <tr><td colspan='2' align='center'> <input type=\"submit\" value=\"Promeni\" id=\"promeniProfil\" /></td></tr>";
                UserView += " </table >";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                $("#PageContent").html(UserView);
            });

            $(document).on("click", "#promeniProfil", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                if ($("#korisnickoIme").val() != "" && $("#korisnickaLozinka").val() != ""
                    && $("#Ime").val() != "" && $("#Prezime").val() != "" && $("#korisnickiJMBG").val() != "" && $("#korisnickiTelefon").val() != "" && $("#korisnickiEmail").val() != "") {
                    var objekat = {
                        UserName: $("#korisnickoIme").val(), Password: $("#korisnickaLozinka").val(), Name: $("#Ime").val(), LastName: $("#Prezime").val(),
                        Gender: $("#pol").val(), JMBG: $("#korisnickiJMBG").val(), PhoneNumber: $("#korisnickiTelefon").val(), Email: $("#korisnickiEmail").val(), Id: trenutnoUlogovan.Id
                    };


                    $.get("/api/ahome/changeuser", objekat, function (data, status) {
                        if (data.UserName == null) {
                            $("#Greske").html(data);
                        } else {
                            trenutnoUlogovan = data;
                            sessionStorage.setItem("ulogovaniKorisnik", JSON.stringify(trenutnoUlogovan));
                            $("#AllGood").html("Izmene izvršene");
                        }
                    });
                } else {

                    var Greska = "Izmena koju ste uneli nije moguca";
                    $("#Greske").html(Greska);
                }

            });

            $(document).on("click", "#logout", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                $.ajax({
                    url: "/api/ahome/logoutuser",
                    data: trenutnoUlogovan,
                    type: "DELETE"
                });
                trenutnoUlogovan = null;

                UserView = "<table>";
                UserView += "    <tr>";
                UserView += "        <td> Korisničko ime </td>";
                UserView += "        <td> <input type=\"text\" id=\"Username\" /> </td>";
                UserView += "    </tr>";
                UserView += "    <tr>";
                UserView += "        <td> Lozinka </td>";
                UserView += "        <td> <input type=\"password\" id=\"Password\" /> </td>";
                UserView += "    </tr>";
                UserView += "    <tr>";
                UserView += "        <td> <input type=\"button\" value=\"Uloguj se\" id=\"logovanjeButton\" /></td>";
                UserView += "    </tr>";
                UserView += "</table>";

                UserMenu = "<table align=\"center\"> ";
                UserMenu += "    <tr>";
                UserMenu += "        <td id=\"logovanje\"> Uloguj se </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"registracija\"> Registruj se </td>";
                UserMenu += "    </tr>";
                UserMenu += " </table>";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                sessionStorage.setItem("trenutniMeni", UserMenu);

                $("#PageContent").html(UserView);
                $("#PageMenu").html(UserMenu);
            });

            $(document).on("click", "#profilVozaca", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = " <table>";
                UserView += " <tr> <td> Korisničko ime: </td> <td> <input type=\"text\" id=\"korisnickoIme\" value=" + trenutnoUlogovan.UserName + " /></td> </tr>";
                UserView += "   <tr> <td> Lozinka: </td> <td> <input type=\"password\" id=\"korisnickaLozinka\" value=" + trenutnoUlogovan.Password + " /> </td> </tr>";
                UserView += "    <tr> <td> Ime: </td> <td> <input type=\"text\" id=\"Ime\" value=" + trenutnoUlogovan.Name + " /></td> </tr>";
                UserView += "   <tr> <td> Prezime: </td> <td> <input type=\"text\" id=\"Prezime\" value=" + trenutnoUlogovan.LastName + " /> </td> </tr>";
                if (trenutnoUlogovan.Gender == 1) {
                    UserView += "   <tr> <td> Pol: </td> <td>";
                    UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                    UserView += "            <option value=\"1\">Žensko</option>";
                    UserView += "            <option value=\"0\">Muško</option>";
                    UserView += "        </select>";
                } else {
                    UserView += "   <tr> <td> Pol: </td> <td>";
                    UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                    UserView += "            <option value=\"0\">Muško</option>";
                    UserView += "            <option value=\"1\">Žensko</option>";
                    UserView += "        </select>";
                }
                UserView += "    </td> </tr>";
                UserView += "    <tr> <td> JMBG: </td> <td> <input type=\"text\" id=\"korisnickiJMBG\" value=" + trenutnoUlogovan.JMBG + " /> </td> </tr>";
                UserView += "    <tr> <td> Kontakt telefon: </td> <td> <input type=\"text\" id=\"korisnickiTelefon\" value=" + trenutnoUlogovan.PhoneNumber + " /> </td> </tr>";
                UserView += "    <tr> <td> Email: </td> <td> <input type=\"text\" id=\"korisnickiEmail\" value=" + trenutnoUlogovan.Email + " /> </td> </tr>";
                //
                UserView += "<tr> </td> <td> </td> <td></tr>";
                UserView += "<tr>";
                UserView += "    <td> Lokacija </td> <td> </td>";
                UserView += "</tr>";
                UserView += "     <tr> <td> Adresa: </td>  <td id=\"kord\"> " + trenutnoUlogovan.Lokacija.Adresa.UlicaBroj + "," + trenutnoUlogovan.Lokacija.Adresa.MestoPostanski + " </td> </tr>";

                UserView += " </table>";

                UserView +=   map;

                UserView += " <table>";
                UserView += "    <tr> <td> Registracija </td> <td> <input type=\"text\" id=\"korisnickaRegistracija\" value=" + trenutnoUlogovan.Automobil.Registracija + " /> </td> </tr>";
                UserView += "    <tr> <td> Godište </td> <td> <input type=\"text\" id=\"korisnickoGodiste\" value=" + trenutnoUlogovan.Automobil.GodisteAutomobila + " /> </td> </tr>";
                UserView += "   <tr> <td> Tip vozila </td> <td>";
                if (trenutnoUlogovan.Automobil.TipAutomobila == 0) {
                    UserView += "            <select name=\"TipVozila\" id=\"TipVozila\" size=\"1\">";
                    UserView += "                <option value=\"0\">putnicki</option>";
                    UserView += "<option value=\"1\">kombi</option>";
                } else {
                    UserView += "                    <select name=\"TipVozila\" id=\"TipVozila\" size=\"1\">";
                    UserView += "                        <option value=\"1\">kombi</option>";
                    UserView += "<option value=\"0\">putnicki</option>";
                }
                UserView += "</select>";
                UserView += "</td> </tr>";
                UserView += "   <tr><td colspan='2' align='center'> <input type=\"submit\" value=\"Promeni\" id=\"promeniVozaca\" /></td></tr>";
                UserView += " </table >";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                $("#PageContent").html(UserView);
            });

            $(document).on("click", "#promeniVozaca", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                if ($("#korisnickoIme").val() != "" && $("#korisnickaLozinka").val() != ""
                    && $("#Ime").val() != "" && $("#Prezime").val() != "" && $("#korisnickiJMBG").val() != "" && $("#korisnickiTelefon").val() != "" && $("#korisnickiEmail").val() != ""
                    && $("#korisnickoGodiste").val() != "" && $("#korisnickaRegistracija").val() != "" && $("#TipVozila").val() != ""
                ) {
                    if (xx == null) {
                        xx = trenutnoUlogovan.Lokacija.Xcoordinate;
                        yy = trenutnoUlogovan.Lokacija.Ycoordinate;
                        ulica_broj = trenutnoUlogovan.Lokacija.Adresa.UlicaBroj;
                        grad = trenutnoUlogovan.Lokacija.Adresa.grad;
                    }

                    var objekat = {
                        UserName: $("#korisnickoIme").val(),
                        Password: $("#korisnickaLozinka").val(),
                        Name: $("#Ime").val(),
                        LastName: $("#Prezime").val(),
                        Gender: $("#pol").val(),
                        JMBG: $("#korisnickiJMBG").val(),
                        PhoneNumber: $("#korisnickiTelefon").val(),
                        Email: $("#korisnickiEmail").val(),
                        Id: trenutnoUlogovan.Id,
                        Lokacija:
                        {
                                Xcoordinate: xx,
                                Ycoordinate: yy,
                                Adresa: {
                                    UlicaBroj: ulica_broj,
                                    MestoPostanski: grad
                                }
                        },
                        Automobil:
                        {
                                GodisteAutomobila: $("#korisnickoGodiste").val(), 
                                Registracija: $("#korisnickaRegistracija").val(),
                                TipAutomobila: $("#TipVozila").val()
                        }
                    };

                    $.get("/api/ahome/changedriver", objekat, function (data, status) {
                        if (data.UserName == null) {
                            $("#Greske").html(data);
                        } else {
                            trenutnoUlogovan = data;
                            sessionStorage.setItem("ulogovaniKorisnik", JSON.stringify(trenutnoUlogovan));
                            $("#AllGood").html("Izmene izvršene");
                        }
                    });
                } else {

                    var Greska = "Izmena koju ste uneli nije moguca";
                    $("#Greske").html(Greska);
                }

            });

            $(document).on("click", "#opcijeAdmina", function () {
                //
                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = " <br/> ";
                UserView += "<input type=\"submit\" value=\"Prikazi sve voznje\" id=\"prikazSvihVoznji\"/>";
                UserView += "    <table border=\"1\">";
                UserView += "        <tr> <th> Start </th> <th> Odredište </th> <th> Mušterija </th> <th> Vozač </th> <th> Dispečer </th> <th> Status vožnje </th> <th> </th> <th> </th> </tr>";

                for (v in trenutnoUlogovan.Voznje) {
                    UserView += "   <tr> <td> " + trenutnoUlogovan.Voznje[v].LokacijaPolazna.Adresa.UlicaBroj + " " + trenutnoUlogovan.Voznje[v].LokacijaPolazna.Adresa.MestoPostanski + " </td> <td>" + trenutnoUlogovan.Voznje[v].Odrediste + " </td> <td>" + trenutnoUlogovan.Voznje[v].Musterija + " " + "  </td > <td> " + trenutnoUlogovan.Voznje[v].Vozac + "</td> <td>" + trenutnoUlogovan.Voznje[v].Dispatcher + "</td> <td>" + trenutnoUlogovan.Voznje[v].StatusVoznje + " </td> <td> <input type=\"submit\" value=\"Izmeni\" id=\"izmenivoznju\" /> </td> <td> <input type=\"submit\" value=\"Pregledaj\" id=\"pregledajvoznju\" /> </td>  </tr > ";
                }
                UserView += "    </table>";
                UserView += " <p> Pretraga po statusu </p>";
                UserView += "<select name=\"vrsteVoznji\" size=\"1\">";
                UserView += "   <option value=\"1\">KREIRANA</option>";
                UserView += "    <option value=\"2\">FORMIRANA</option>";
                UserView += "    <option value=\"3\">OBRADJENA</option>";
                UserView += "    <option value=\"4\">PRIHVACENA</option>";
                UserView += "    <option value=\"5\">OTKAZANA</option>";
                UserView += "    <option value=\"6\">NEUSPESNA</option>";
                UserView += "    <option value=\"8\">USPESNA</option>";
                UserView += "    <option value=\"8\">U_TOKU</option>";
                UserView += "</select> <br/> <br/>";

                UserView += " <input value=\"Sortiranje po Datumu\" id=\"dateSort\" type=\"submit\" /> <br />";
                UserView += "    <input value=\"Sortiranje po Oceni   \" id=\"gradeSort\" type=\"submit\" /> <br />";

                UserView += "    <br/> Pretražite po datumu <br/> ";

                UserView += "Početni datum: <input id=\"startdateSort\" type=\"datetime - local\" /> <br />";
                UserView += "Krajnji datum: &nbsp;<input id=\"enddateSort\" type=\"datetime - local\" /> <br />";
                //UserView += "    <input type=\"submit\" id=\"searchByDate\" value=\"Pretraži\" /> <br/>";

                UserView += "     <br/>Pretražite po oceni <br/> ";
                UserView += "     Minimalna ocena: &nbsp;&nbsp;&nbsp;&nbsp;  ";

                UserView += "   <select name=\"OceneMin\" size=\"1\">";
                UserView += "        <option value=\"0\">0</option>";
                UserView += "        <option value=\"1\">1</option>";
                UserView += "        <option value=\"2\">2</option>";
                UserView += "        <option value=\"3\">3</option>";
                UserView += "        <option value=\"4\">4</option>";
                UserView += "        <option value=\"5\">5</option>";
                UserView += "    </select> <br/>";

                UserView += "     Maksimalna ocena: &nbsp;&nbsp;   ";

                UserView += "    <select name=\"OceneMax\" size=\"1\">";
                UserView += "        <option value=\"0\">0</option>";
                UserView += "         <option value=\"1\">1</option>";
                UserView += "        <option value=\"2\">2</option>";
                UserView += "        <option value=\"3\">3</option>";
                UserView += "        <option value=\"4\">4</option>";
                UserView += "        <option value=\"5\">5</option>";
                UserView += "    </select> <br/>";

                //UserView += "     <input type=\"submit\" id=\"searchByGrade\" value=\"Pretraži\" />";

                UserView += "   <p> <br/>Pretraga po ceni </p>";
                UserView += "    Minimalna cena: &nbsp;&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";
                UserView += "    Maksimalna cena:&nbsp; <input type=\"text\" id=\"searchByDate\" /> <br />";

                //UserView += "    <input type=\"submit\" id=\"searchByPrice\" value=\"Pretraži\" />";

                UserView += "<p> <br/>Pretraga po imenu i/ili prezimenu korisnika </p>";
                UserView += " <br/>Ime korisnika: <br/>";
                UserView += "<input type=\"text\" id=\"imeZaPretragu\" />";

                UserView += " <br/>Prezime korisnika: <br/>";
                UserView += "<input type=\"text\" id=\"prezimeZaPretragu\" />";
                //UserView += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type=\"submit\" id=\"pretrazikorisnike\" value=\"Pretraži korisnike\" />";

                UserView += "<p> <br/>Pretraga po imenu i/ili prezimenu vozača </p>";
                UserView += " <br/>Ime vozača: <br/>";
                UserView += "<input type=\"text\" id=\"vimeZaPretragu\" />";

                UserView += " <br/>Prezime vozača: <br/>";
                UserView += "<input type=\"text\" id=\"vprezimeZaPretragu\" />";
                UserView += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type=\"submit\" id=\"izvrsiPretragu\" value=\"Pretraži\" />";

                UserMenu = "<table align=\"center\">";
                UserMenu += "  <tr> ";
                UserMenu += "        <td id=\"opcijeAdmina\"> Opcije </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"profilAdmina\"> Pregled profila </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"novaVoznja\"> Nova vožnja </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"noviVozac\"> Novi vozač </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"blok\"> Blokiraj Korisnika </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"logout\"> Izloguj se </td>";
                UserMenu += "    </tr>";
                UserMenu += "</table>";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                sessionStorage.setItem("trenutniMeni", UserMenu);

                $("#PageContent").html(UserView);
                $("#PageMenu").html(UserMenu);
                //
            });

            $(document).on("click", "#profilAdmina", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = " <table>";
                UserView += " <tr> <td> Korisničko ime: </td> <td> <input type=\"text\" id=\"korisnickoIme\" value=" + trenutnoUlogovan.UserName + " /></td> </tr>";
                UserView += "   <tr> <td> Lozinka: </td> <td> <input type=\"password\" id=\"korisnickaLozinka\" value=" + trenutnoUlogovan.Password + " /> </td> </tr>";
                UserView += "    <tr> <td> Ime: </td> <td> <input type=\"text\" id=\"Ime\" value=" + trenutnoUlogovan.Name + " /></td> </tr>";
                UserView += "   <tr> <td> Prezime: </td> <td> <input type=\"text\" id=\"Prezime\" value=" + trenutnoUlogovan.LastName + " /> </td> </tr>";
                UserView += "   <tr> <td> Pol: </td> <td>";
                if (trenutnoUlogovan.Gender == 1) {
                    UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                    UserView += "            <option value=\"1\">Žensko</option>";
                    UserView += "            <option value=\"0\">Muško</option>";
                    UserView += "        </select>";
                } else {
                    UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                    UserView += "            <option value=\"0\">Muško</option>";
                    UserView += "            <option value=\"1\">Žensko</option>";
                    UserView += "        </select>";
                }
                UserView += "    </td> </tr>";
                UserView += "    <tr> <td> JMBG: </td> <td> <input type=\"text\" id=\"korisnickiJMBG\" value=" + trenutnoUlogovan.JMBG + " /> </td> </tr>";
                UserView += "    <tr> <td> Kontakt telefon: </td> <td> <input type=\"text\" id=\"korisnickiTelefon\" value=" + trenutnoUlogovan.PhoneNumber + " /> </td> </tr>";
                UserView += "    <tr> <td> Email: </td> <td> <input type=\"text\" id=\"korisnickiEmail\" value=" + trenutnoUlogovan.Email + " /> </td> </tr>";
                UserView += "   <tr><td colspan='2' align='center'> <input type=\"submit\" value=\"Promeni\" id=\"promeniAdmina\" /></td></tr>";
                UserView += " </table >";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                $("#PageContent").html(UserView);    
            });

            $(document).on("click", "#promeniAdmina", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                if ($("#korisnickoIme").val() != "" && $("#korisnickaLozinka").val() != ""
                    && $("#Ime").val() != "" && $("#Prezime").val() != "" && $("#korisnickiJMBG").val() != "" && $("#korisnickiTelefon").val() != "" && $("#korisnickiEmail").val() != "") {
                    var objekat = {
                        UserName: $("#korisnickoIme").val(), Password: $("#korisnickaLozinka").val(), Name: $("#Ime").val(), LastName: $("#Prezime").val(),
                        Gender: $("#pol").val(), JMBG: $("#korisnickiJMBG").val(), PhoneNumber: $("#korisnickiTelefon").val(), Email: $("#korisnickiEmail").val(), Id: trenutnoUlogovan.Id
                    };


                    $.get("/api/ahome/changeadmin", objekat, function (data, status) {
                        if (data.UserName == null) {
                            $("#Greske").html(data);
                        } else {
                            trenutnoUlogovan = data;
                            sessionStorage.setItem("ulogovaniKorisnik", JSON.stringify(trenutnoUlogovan));
                            $("#AllGood").html("Izmene izvršene");
                        }
                    });
                } else {

                    var Greska = "Izmena koju ste uneli nije moguca";
                    $("#Greske").html(Greska);
                }
            });

            $(document).on("click", "#blok", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

             // var BlokView = "";
                BlokView = "";
                //onda na serveru stavim novi u listu (ako je validan) korisnika koji su blokirani i ne nalazi vec u listi blokiranih - vratiti poruku da postoji vec u listi blokiranih
                //vratim novu listu
                //ispisem novu listu
                //saopstim da je korisnik uspesno blokiran u all good ako je uspesno blokiran
                //else stavim da nije uspesno blokiran

                //. . . . .pozovi funkciju za obracanje serveru. . . .

               // $("#Greske").html("Usao u funkciju");
                $.get("/api/ahome/blockedList", "") 
                    .done(function (data) {
                       //  $("#Greske").html("Dobavio blokirane");

                    var nesto = eval(data);
                    var table = "";
                    var table1 = "";
                    table += "";
                    table = " <h2> Blokirani korisnici </h2> ";
                    table += "    <table border=\"1\">";
                    table += "        <tr><th colspan=\"2\"> Blokirani korisnici </th> </tr>";

                    var select = "";
                    select += "<select name=\"Blokirani\" id=\"blocked\" size=\"1\">";
                        counter = 1;

                        for (v in nesto) {
                            table1 += "   <tr> <td>" + counter + "</td> <td> " + nesto[v] + " </td> </tr>";
                            select += " <option value =\"" + v + "\">" + nesto[v] + "</option>";
                            counter++;
                        }

                        select += "</select>";

                    if (table1 == "") {
                        table = "";
                        BlokView = "<br/> <br/><h2> Trenutno nema blokiranih korisnika </h2> <br/>";
                        
                    } else {
                        table1 += "</table> <br/>";
                        table += table1;
                        BlokView += table;
                        BlokView += select;
                        BlokView += "<input type=\"submit\" name=\"Odblokiraj\" value=\"Odblokiraj\" id=\"odblokiraj\" /> <br/>";
                    }

                    // UserView = "<h2> Trenutno nema blokiranih korisnika </h2> <br/>";
                    sessionStorage.setItem("PrviDeo", BlokView);

                        $.get("/api/ahome/unblockedList", "")
                            .done(function (data) {
                        //$("#Greske").html("Dobavio ne blokirane");

                        var nesto = eval(data);
                        var select = "";
                        //var BlokView1 = ""; S OVIM SIGURNO RADI!!!
                                BlokView1 = "";
                                BlokView1 += "<br/><select name=\"NeBlokirani\" id=\"nonblocked\" size=\"1\">";
                        for (v in nesto) {
                            select += " <option value =\"" + v + "\">" + nesto[v] + "</option>";
                        }
                        select += "</select> ";

                                BlokView1 += select;

                                BlokView1 += "<input type=\"submit\" id=\"blokirajk\" name=\"blokirajk\" value=\"Blokiraj\" />";

                                sessionStorage.setItem("DrugiDeo", BlokView);
                                UserView = BlokView + BlokView1;
                                //UserView += sessionStorage.getItem("PrviiDeo");
                                //UserView += sessionStorage.getItem("DrugiDeo");
                                sessionStorage.setItem("trenutniPrikaz", UserView);
                                $("#PageContent").html(UserView);
                        });// 
                    });
               
                /*UserView = "";
                UserView = sessionStorage.getItem("PrviDeo");
                if (sessionStorage.getItem("DrugiDeo") == null) {

                    $.get("/api/ahome/unblockedList", "")
                        .done(function (data) {
                            //$("#Greske").html("Dobavio ne blokirane");

                            var nesto = eval(data);
                            var select = "";
                            BlokView = "";
                            BlokView += "<select name=\"NeBlokirani\" id=\"nonblocked\" size=\"1\">";
                            for (v in nesto) {
                                select += " <option value =\"" + v + "\">" + nesto[v] + "</option>";
                            }
                            select += "</select> <br/>";

                            BlokView += select;

                            BlokView += "<input type=\"submit\" id=\"blokiraj\" value=\"Blokiraj\" />";

                            sessionStorage.setItem("DrugiDeo", BlokView);
                        });//
                }*/

                /*UserView += sessionStorage.getItem("DrugiDeo");
                sessionStorage.setItem("trenutniPrikaz", UserView);
                $("#PageContent").html(UserView);
                 */
                

                //Trazi listu neblokiranih
               
                //

                
            });

            $(document).on("click", "#blokirajk", function () {

                var korisnik = { nesto: $("#nonblocked").val() };
                if (korisnik != null && korisnik != "") {

                    $.get("/api/ahome/blokiranjga", korisnik, function (data, status) {
                        if (data.UserName == null) {
                            $("#Greske").html(data);
                        } else {
                            //Sve isto kao i kad dobavljamo inicijalno listu
                            $("#Greske").empty();
                            $("#AllGood").empty();

                            // var BlokView = "";
                            BlokView = "";

                            $.get("/api/ahome/blockedList", "")
                                .done(function (data) {

                                    var nesto = eval(data);
                                    var table = "";
                                    var table1 = "";
                                    table += "";
                                    table = " <h2> Blokirani korisnici </h2> ";
                                    table1 += "    <table border=\"1\">";
                                    table1 += "        <tr> <th colspan=\"2\"> Blokirani korisnici </th> </tr>";

                                    var select = "";
                                    select += "<select name=\"Blokirani\" id=\"blocked\" size=\"1\">";

                                    counter = 1;
                                    for (v in nesto) {
                                        table1 += "   <tr> <td>" + counter + "</td> <td> " + nesto[v] + " </td> </tr>";
                                        select += " <option value =\"" + v + "\">" + nesto[v] + "</option>";
                                        counter++;
                                    }

                                    select += "</select>";
                                    table1 += "</table> <br/>";

                                    if (table1 == "") {
                                        table = "";
                                        BlokView = "<br/> <br/><h2> Trenutno nema blokiranih korisnika </h2> <br/>";

                                    } else {
                                        table += table1;
                                        BlokView += table;
                                        BlokView += select;
                                        BlokView += "<input type=\"submit\" name=\"Odblokiraj\" value=\"Odblokiraj\" id=\"odblokiraj\" /> <br/>";
                                    }

                                    sessionStorage.setItem("PrviDeo", BlokView);

                                    $.get("/api/ahome/unblockedList", "")
                                        .done(function (data) {

                                            var nesto = eval(data);
                                            var select = "";
                                            BlokView1 = "";
                                            BlokView1 += "<br/><select name=\"NeBlokirani\" id=\"nonblocked\" size=\"1\">";
                                            for (v in nesto) {
                                                select += " <option value =\"" + v + "\">" + nesto[v] + "</option>";
                                            }
                                            select += "</select> ";

                                            BlokView1 += select;

                                            BlokView1 += "<input type=\"submit\" id=\"blokirajk\" name=\"blokirajk\" value=\"Blokiraj\" />";

                                            sessionStorage.setItem("DrugiDeo", BlokView);
                                            UserView = BlokView + BlokView1;
                                            sessionStorage.setItem("trenutniPrikaz", UserView);
                                            $("#PageContent").html(UserView);
                                        });// 
                                });

                            $("#AllGood").html("Korisnik je blokiran");
                            // ponovo se obrati serveru da dobavis sve blokirane i sve neblokirane jer su sada izmenjeni 
                        }

                    });

                }
            });

            $(document).on("click", "#odblokiraj", function () {
                var korisnik = { nesto: $("#blocked").val() };
                if (korisnik != null && korisnik != "") {

                    $.get("/api/ahome/odblokirajga", korisnik, function (data, status) {
                        if (data.UserName == null) {
                            $("#Greske").html(data);
                        } else {
                            $("#Greske").empty();
                            $("#AllGood").empty();
                            $("#AllGood").html("Korisnik je odblokiran");

                            BlokView = "";

                            $.get("/api/ahome/blockedList", "")
                                .done(function (data) {

                                    var nesto = eval(data);
                                    var table = "";
                                    var table1 = "";
                                    table += "";
                                    table = " <h2> Blokirani korisnici </h2> ";
                                    table1 += "    <table border=\"1\">";
                                    table1 += "        <tr> <th colspan=\"2\"> Blokirani korisnici </th> </tr>";

                                    var select = "";
                                    select += "<select name=\"Blokirani\" id=\"blocked\" size=\"1\">";

                                    counter = 1;
                                    for (v in nesto) {
                                        table1 += "   <tr> <td>" + counter + "</td> <td> " + nesto[v] + " </td> </tr>";
                                        select += " <option value =\"" + v + "\">" + nesto[v] + "</option>";
                                        counter++;
                                    }

                                    select += "</select>";
                                    table1 += "</table> <br/>";

                                    if (table1 == "") {
                                        table = "";
                                        BlokView = "<br/> <br/><h2> Trenutno nema blokiranih korisnika </h2> <br/>";

                                    } else {
                                        table += table1;
                                        BlokView += table;
                                        BlokView += select;
                                        BlokView += "<input type=\"submit\" name=\"Odblokiraj\" value=\"Odblokiraj\" id=\"odblokiraj\" /> <br/>";
                                    }

                                    sessionStorage.setItem("PrviDeo", BlokView);

                                    $.get("/api/ahome/unblockedList", "")
                                        .done(function (data) {

                                            var nesto = eval(data);
                                            var select = "";
                                            BlokView1 = "";
                                            BlokView1 += "<br/><select name=\"NeBlokirani\" id=\"nonblocked\" size=\"1\">";
                                            for (v in nesto) {
                                                select += " <option value =\"" + v + "\">" + nesto[v] + "</option>";
                                            }
                                            select += "</select> ";

                                            BlokView1 += select;

                                            BlokView1 += "<input type=\"submit\" id=\"blokirajk\" name=\"blokirajk\" value=\"Blokiraj\" />";

                                            sessionStorage.setItem("DrugiDeo", BlokView);
                                            UserView = BlokView + BlokView1;
                                            sessionStorage.setItem("trenutniPrikaz", UserView);
                                            $("#PageContent").html(UserView);
                                        });// 
                                });

                        }
                    });
                }


            });

            $(document).on("click", "#noviVozac", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = "<h2> Unesite informacije o vozaču </h2>"
                UserView += " <table>";
                UserView += " <tr> <td> Korisničko ime: </td> <td> <input type=\"text\" id=\"korisnickoIme\" value=\"\" /></td> </tr>";
                UserView += "   <tr> <td> Lozinka: </td> <td> <input type=\"password\" id=\"korisnickaLozinka\" value=\"\" /> </td> </tr>";
                UserView += "    <tr> <td> Ime: </td> <td> <input type=\"text\" id=\"Ime\" value=\" \" /></td> </tr>";
                UserView += "   <tr> <td> Prezime: </td> <td> <input type=\"text\" id=\"Prezime\" value=\" \" /> </td> </tr>";

                    UserView += "   <tr> <td> Pol: </td> <td>";
                    UserView += "       <select name=\"Pol\" id=\"pol\" size=\"1\">";
                    UserView += "            <option value=\"0\">Muško</option>";
                    UserView += "            <option value=\"1\">Žensko</option>";
                    UserView += "        </select>";

                UserView += "    </td> </tr>";
                UserView += "    <tr> <td> JMBG: </td> <td> <input type=\"text\" id=\"korisnickiJMBG\" value=\" \" /> </td> </tr>";
                UserView += "    <tr> <td> Kontakt telefon: </td> <td> <input type=\"text\" id=\"korisnickiTelefon\" value=\"\" /> </td> </tr>";
                UserView += "    <tr> <td> Email: </td> <td> <input type=\"text\" id=\"korisnickiEmail\" value=\"\" /> </td> </tr>";
                //
                UserView += "<tr> </td> <td> </td> <td></tr>";
                UserView += "<tr>";
                UserView += "    <td> Lokacija </td> <td> </td>";
                UserView += "</tr>";
                UserView += "     <tr> <td> Adresa: </td>  <td id=\"kord\"> </td> </tr>";   // kako da se ispisu kordinate kad kliknem

                UserView += " </table>";

                UserView += map;

                UserView += " <table>";
                UserView += "    <tr> <td> Registracija </td> <td> <input type=\"text\" id=\"korisnickaRegistracija\" value=\"\" /> </td> </tr>";
                UserView += "    <tr> <td> Godište </td> <td> <input type=\"text\" id=\"korisnickoGodiste\" value=\"\" /> </td> </tr>";
                UserView += "   <tr> <td> Tip vozila </td> <td>";

                    UserView += "            <select name=\"TipVozila\" id=\"TipVozila\" size=\"1\">";
                    UserView += "                <option value=\"0\">putnicki</option>";
                    UserView += "<option value=\"1\">kombi</option>";

                UserView += "</select>";
                UserView += "</td> </tr>";
                UserView += "   <tr><td colspan='2' align='center'> <input type=\"submit\" value=\"Kreiraj vozača\" id=\"kreirajVozaca\" /></td></tr>";
                UserView += " </table >";

                UserMenu = "<table align=\"center\">";
                UserMenu += "  <tr> ";
                UserMenu += "        <td id=\"opcijeAdmina\"> Opcije </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"profilAdmina\"> Pregled profila </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"novaVoznja\"> Nova vožnja </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"noviVozac\"> Novi vozač </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"blok\"> Blokiraj Korisnika </td>";
                UserMenu += "        <td>&nbsp; &nbsp; &nbsp;</td>";
                UserMenu += "        <td id=\"logout\"> Izloguj se </td>";
                UserMenu += "    </tr>";
                UserMenu += "</table>";

                sessionStorage.setItem("trenutniPrikaz", UserView);
                sessionStorage.setItem("trenutniMeni", UserMenu);
                $("#PageContent").html(UserView);
                $("#PageMenu").html(UserMenu);
            });

            $(document).on("click", "#kreirajVozaca", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                if ($("#korisnickoIme").val() != "" && $("#korisnickaLozinka").val() != ""
                    && $("#Ime").val() != "" && $("#Prezime").val() != "" && $("#korisnickiJMBG").val() != "" && $("#korisnickiTelefon").val() != "" && $("#korisnickiEmail").val() != ""
                    && $("#korisnickoGodiste").val() != "" && $("#korisnickaRegistracija").val() != "" && $("#TipVozila").val() != ""
                ) {
                    if (xx == null) {
                        /*xx = trenutnoUlogovan.Lokacija.Xcoordinate;
                        yy = trenutnoUlogovan.Lokacija.Ycoordinate;
                        ulica_broj = trenutnoUlogovan.Lokacija.Adresa.UlicaBroj;
                        grad = trenutnoUlogovan.Lokacija.Adresa.grad;*/
                        var Greska = "Niste ispravno popunili polja";
                        $("#Greske").html(Greska);
                        //break;

                    } else {
                        var objekat = {
                            UserName: $("#korisnickoIme").val(),
                            Password: $("#korisnickaLozinka").val(),
                            Name: $("#Ime").val(),
                            LastName: $("#Prezime").val(),
                            Gender: $("#pol").val(),
                            JMBG: $("#korisnickiJMBG").val(),
                            PhoneNumber: $("#korisnickiTelefon").val(),
                            Email: $("#korisnickiEmail").val(),
                            Id: trenutnoUlogovan.Id,
                            Lokacija:
                                {
                                    Xcoordinate: xx,
                                    Ycoordinate: yy,
                                    Adresa: {
                                        UlicaBroj: ulica_broj,
                                        MestoPostanski: grad
                                    }
                                },
                            Automobil:
                                {
                                    GodisteAutomobila: $("#korisnickoGodiste").val(),
                                    Registracija: $("#korisnickaRegistracija").val(),
                                    TipAutomobila: $("#TipVozila").val()
                                }
                        };

                        //
                        $.post("/api/ahome/kreiranjekorisnika", objekat, function (data, status) {
                            if (data.UserName == null) {
                                $("#Greske").html(data);
                            } else {
                                //trenutnoUlogovan = data;
                                //sessionStorage.setItem("ulogovaniKorisnik", JSON.stringify(trenutnoUlogovan));
                                $("#AllGood").html("Vozač kreiran");
                            }
                            //

                        });
                    }

                    
                 }else {

                    var Greska = "Niste ispravno popunili polja";
                    $("#Greske").html(Greska);
                }

                //////////////////////////////////////////////////

            });

            $(document).on("click", "#novaVoznja", function(){
                $("#Greske").empty();
                $("#AllGood").empty();

                UserView = "<p> Izaberite početnu lokaciju </p>";
                UserView += map;

                UserView += "<table> <tr> <td> Adresa: </td> <td id=\"kord\"> </td> </tr> </table>";

                UserView += "    Tip vozila ";

                UserView += "            <select name=\"TipVozila\" id=\"TipVozila\" size=\"1\">";
                UserView += "                <option value=\"0\">putnicki</option>";
                UserView += "<option value=\"1\">kombi</option> </select>";

                UserView += "<br/>Ovde sledi izbor vozaca <br/>";

                UserView += "<select name=\"vozaci\" id=\"vozaci\" size=\"1\">";
                //
                UserView += pomocVozaci;
                UserView += "</select>";

                UserView += "<input value=\"Kreiraj vožnju\" type=\"submit\"  id=\"kreirajvoznju\" />";
                // Sta ako izabrani vozac nema to vozilo
                //NAPRAVI FUNKCIJU KOJA CE DA PROVERI DA LI TRAZENI VOZAC IMA AUTO KOJI JE SELEKTOVAN AKO NEMA ONDA VRATI GRESKU

                sessionStorage.setItem("trenutniPrikaz", UserView);
                $("#PageContent").html(UserView);
            });

            $(document).on("click", "#kreirajvoznju", function () {
                $("#Greske").empty();
                $("#AllGood").empty();

                if (kord == null) {
                    $("#Greske").html("Niste izabrali lokaciju voznje");
                } else {
                    var objekat = {
                        LokacijaPolazna: {
                            Xcoordinate: xx,
                            Ycoordinate: yy,
                            Adresa: {
                                UlicaBroj: ulica_broj,
                                MestoPostanski: grad
                            }
                        },
                        Dispatcher: trenutnoUlogovan.Id,
                        Vozac: $("#vozaci").val(),
                        TipVozila: $("#TipVozila").val()
                    };

                    $.post("/api/ahome/kreiranjevoznje", objekat, function (data, status) {
                        if (data.Id == null) {
                            $("#Greske").html(data);
                        } else {
                            $("#AllGood").html("Vožnja uspešno kreirana");
                            trenutnoUlogovan = data;
                        }
                    });

                }


                
            });


        });
    </script>
</head>




<body>
    <div class="Baner" id="PageBanner">
        Taksi služba
    </div>

    <div id="PageMenu" class="Meni">
        <table align="center">
            <tr>
                <td id="logovanje"> Uloguj se </td>
                <td>&nbsp; &nbsp; &nbsp;</td>
                <td id="registracija"> Registruj se </td>
            </tr>
        </table>
    </div>
    <br /><br /><br />

    <div id="PageContent">
        <table>
            <tr>
                <td> Korisničko ime </td>
                <td> <input type="text" id="Username" /> </td>
            </tr>
            <tr>
                <td> Lozinka </td>
                <td> <input type="password" id="Password" /> </td>
            </tr>
            <tr>
                <td> <input type="button" value="Uloguj se" id="logovanjeButton" /></td>
            </tr>
        </table>
    </div>

    <div id="Greske" class="Bad">
    </div>

    <div id="AllGood" class="Good">
    </div>


</body>
</html>

